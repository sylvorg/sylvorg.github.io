#+setupfile: ./settings/README.org

* CNAME
:PROPERTIES:
:ID:       b2bb02de-0ced-4df2-a6f5-2734845e163f
:CUSTOM_ID:       b2bb02de-0ced-4df2-a6f5-2734845e163f
:END:

#+begin_src plaintext :tangle (meq/tangle-path)
syvl.org
#+end_src

* index.html
:PROPERTIES:
:header-args:shell+: :noweb-ref index.html
:header-args:html+: :noweb-ref index.html
:ID:       f3e32608-7200-4808-9d42-59112f32d395
:CUSTOM_ID:       f3e32608-7200-4808-9d42-59112f32d395
:END:

#+name: 20220211011451344976852
#+begin_src emacs-lisp :eval never-export
(with-temp-buffer (insert-file-contents "./README.html") (buffer-string))
#+end_src

#+begin_src plaintext :tangle (meq/tangle-path) :shebang "#! /usr/bin/env nix-shell" :exports none
<<index.html>>
#+end_src

This was adapted from [[https://ellipsis.sh/][ellipsis.sh]], raw file [[https://raw.githubusercontent.com/ellipsis/ellipsis/gh-pages/index.html][here]]:

#+begin_src shell
#! nix-shell -i sh -p yadm
#! nix-shell -I nixpkgs=https://github.com/shadowrylander/nixpkgs/archive/j.tar.gz
# This index file is also a shell script! Go to index.syvl.org to see what it can do!
<<\EOF
#+end_src

#+begin_src html
<<20220211011451344976852()>><!--
#+end_src

#+begin_src shell
EOF
#+end_src

#+begin_src shell
yadm clone --no-bootstrap https://github.com/<<username>>/home.git
GIT_SSL_NO_VERIFY=1 yadm submodule update --init --depth 1 --recursive --remote --force
yadm config include.path "$HOME/.gitconfig"
yadm remote set-url --push origin git@github.com:<<username>>/home.git
make -f "$HOME/.emacs.d/makefile" soft-init
chmod +x "$HOME/.config/yadm/bootstrap"
"$HOME/.config/yadm/bootstrap"
#+end_src

* makefile

#+begin_src makefile :tangle (meq/tangle-path)
.RECIPEPREFIX := |
.DEFAULT_GOAL := et

# Adapted From: https://www.systutorials.com/how-to-get-the-full-path-and-directory-of-a-makefile-itself/
mkfilePath := $(abspath $(lastword $(MAKEFILE_LIST)))
mkfileDir := $(dir $(mkfilePath))

et:
|chmod +x $(mkfileDir)/settings/*.sh
|$(mkfileDir)/settings/org-export.sh $(mkfileDir)/README.org
|$(mkfileDir)/settings/org-tangle.sh $(mkfileDir)/README.org

commit:
|git -C $(mkfileDir) commit --allow-empty-message -am ""

push:
|git -C $(mkfileDir) push

cpush: commit push

super-push: et cpush
#+end_src